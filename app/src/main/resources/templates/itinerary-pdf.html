<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title th:text="${itinerary.name} + ' - Itinerary'">Itinerary</title>
    <style>
      :root {
        --text: #1a1a1a;
        --muted: #6b7280; /* gray-500 */
        --border: #e5e7eb; /* gray-200 */
        --accent: #111827; /* gray-900 */
        --chip-bg: #f9fafb; /* gray-50 */
      }

      html,
      body {
        height: 100%;
      }
      * {
        box-sizing: border-box;
      }
      body {
        font-family:
          ui-sans-serif,
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Helvetica,
          Arial,
          "Apple Color Emoji",
          "Segoe UI Emoji";
        color: var(--text);
        margin: 0 auto;
        padding: 40px 28px 70px 28px;
        max-width: 960px;
        line-height: 1.5;
      }

      /* ---------- Header ---------- */
      .company-logo {
        width: 160px;
        max-width: 100%;
        height: auto;
        display: block;
        margin: 0 auto 24px auto;
      }

      .header {
        text-align: center;
        margin-bottom: 26px;
      }
      .header h1 {
        margin: 0 0 14px 0;
        font-size: 32px;
        line-height: 1.2;
        letter-spacing: -0.01em;
      }
      .main-image {
        width: 420px;
        max-width: 100%;
        height: auto;
        border-radius: 12px;
        display: inline-block;
        margin: 0 auto 16px auto;
      }

      .info-row {
        text-align: center;
        margin: 8px auto 10px auto;
        padding: 12px 14px;
        max-width: 880px;
      }
      .info-row {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }
      .info-item {
        display: inline-block;
        vertical-align: middle;
        margin: 5px 5px;
        padding: 10px 10px;
        border-radius: 50px;
        background: #70a7df;
      }
      .info-item {
        display: inline-flex;
        align-items: baseline;
        gap: 1px;
      }
      .info-item .label {
        font-weight: 600;
        color: white;
        white-space: nowrap;
        margin-right: 4px;
      }
      .info-item .value {
        color: #111827;
        white-space: nowrap;
      }

      @media (max-width: 560px) {
        .info-item {
          white-space: normal;
        }
        .info-item .value {
          white-space: normal;
        }
      }

      .section {
        margin: 26px 0 34px 0;
      }

      .section + .section {
        page-break-before: always;
        break-before: page;
      }

      .date-header {
        position: relative;
        font-size: 24px;
        font-weight: 700;
        margin: 24px 0 14px;
        padding-bottom: 0;
        border-bottom: none;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      .date-underline-img {
        width: 100%;
        height: 3px;
        margin-top: 2px;
        margin-bottom: 0;
        display: block;
      }

      .dateitem {
        margin: 14px 0 18px 0;
        padding: 14px 16px;
        border: 1px solid var(--border);
        border-radius: 12px;
        background: #fff;
      }

      .dateitem + .dateitem {
        page-break-before: always;
        break-before: page;
      }

      .dateitem h3 {
        position: relative;
        font-size: 18px;
        margin: 12px 0 8px;
        padding-left: 8px;
        border-left: 3px solid #4a90e2; /* narrow colored bar */
      }
      .dateitem-image {
        max-height: 450px;
        max-width: 100%;
        width: auto;
        height: auto;
        border-radius: 10px;
        object-fit: contain;
        object-position: center;
        display: block;
        margin: 0;
      }

      .pdf-link-container {
        margin: 8px 0;
      }

      .pdf-link {
        display: inline-block;
        padding: 8px 12px;
        background-color: #f3f4f6;
        color: #1f2937;
        text-decoration: none;
        border-radius: 6px;
        border: 1px solid #d1d5db;
        font-weight: 500;
      }

      .pdf-link:hover {
        background-color: #e5e7eb;
      }

      .dateitem .description {
        margin-top: 6px;
      }

      .dateitem-content {
        overflow: hidden;
      }

      .dateitem-image-container {
        float: right;
        max-width: 50%;
        margin-left: 16px;
        margin-bottom: 10px;
      }

      .disclaimer-header {
        display: block;
        position: running(header);
        background: white;
        font-size: 11px;
        font-style: italic;
        color: #374151;
        text-align: center;
        padding: 8px 15px;
        border-bottom: 1px solid #e5e7eb;
        line-height: 1.2;
      }

      .page-footer {
        display: table;
        position: running(footer);
        padding: 8px 0;
        border-top: 1px solid #e5e7eb;
        background: white;
        font-size: 11px;
        color: #374151;
        width: 100%;
        table-layout: fixed;
      }

      .page-footer .footer-left {
        display: table-cell;
        width: 33.33%;
        text-align: left;
        vertical-align: middle;
        padding-left: 0;
      }

      .page-footer .footer-logo {
        height: 30px;
        width: auto;
        vertical-align: middle;
      }

      .page-footer .footer-center {
        display: table-cell;
        width: 33.34%;
        text-align: center;
        vertical-align: middle;
        white-space: nowrap;
      }

      .page-footer .footer-center span {
        display: inline;
        margin: 0 5px;
      }

      .page-footer .footer-right {
        display: table-cell;
        width: 33.33%;
        text-align: right;
        vertical-align: middle;
        padding-right: 0;
      }

      .page-footer .page-number::after {
        content: counter(page);
      }

      @page {
        margin-bottom: 50px;
        margin-left: 20px;
        margin-right: 20px;
        @top-center {
          content: element(header);
        }
        @bottom-center {
          content: element(footer);
        }
      }

      @media print {
        body {
          padding-top: 5px;
          padding-left: 20px;
          padding-right: 20px;
          padding-bottom: 100px;
        }

        .info-row {
          border-color: #d1d5db;
        }
        .dateitem,
        .date-header {
          break-inside: avoid;
        }
        a {
          color: #000;
          text-decoration: none;
        }
      }
    </style>
  </head>
  <body>
    <!-- Page Footer -->
    <div class="page-footer">
      <div class="footer-left">
        <a
          th:if="${companyLogoUrl != null}"
          href="https://www.personally.travel"
          target="_blank"
        >
          <img
            th:src="${companyLogoUrl}"
            class="footer-logo"
            alt="Company Logo"
          />
        </a>
      </div>
      <div
        class="footer-center"
        th:text="${(user != null and user.fullName != null ? user.fullName : '') + (user != null and user.email != null ? ' | ' + user.email : '') + (user != null and user.phoneNumber != null ? ' | ' + user.phoneNumber : '')}"
      >
        Agent Name | Agent Email | Agent Phone Number
      </div>
      <div class="footer-right">
        <span class="page-number">Page </span>
      </div>
    </div>

    <!-- Disclaimer Header -->
    <div class="disclaimer-header">
      Suggested hotels and room types available at time of presentation. Subject
      to change until trip package is reserved. Cost of local flight and ferry
      tickets subject to change until package is reserved.
    </div>

    <div class="header">
      <h1 th:text="${itinerary.name}">Itinerary Name</h1>

      <img
        th:if="${itinerary.coverImageUrl != null}"
        th:src="${itinerary.coverImageUrl}"
        class="main-image"
        alt="Itinerary Image"
      />

      <div class="info-row">
        <div class="info-item" th:if="${itinerary.agent != null}">
          <span class="label">Agent</span>
          <span class="value" th:text="${itinerary.agent}">Agent Name</span>
        </div>
        <div class="info-item" th:if="${itinerary.reservationNumber != null}">
          <span class="label">Reservation #</span>
          <span class="value" th:text="${itinerary.reservationNumber}"
            >PG000000</span
          >
        </div>
        <div class="info-item" th:if="${itinerary.numTravelers != null}">
          <span class="label">Travelers</span>
          <span class="value" th:utext="${itinerary.numTravelers}">2</span>
        </div>
        <div class="info-item" th:if="${itinerary.arrivalDate != null}">
          <span class="label">Arrival</span>
          <span
            class="value"
            th:text="${#temporals.format(itinerary.arrivalDate, 'MMMM d, yyyy')}"
            >January 1, 2026</span
          >
        </div>
        <div class="info-item" th:if="${itinerary.departureDate != null}">
          <span class="label">Departure</span>
          <span
            class="value"
            th:text="${#temporals.format(itinerary.departureDate, 'MMMM d, yyyy')}"
            >January 1, 2026</span
          >
        </div>
        <div class="info-item" th:if="${itinerary.tripPrice != null}">
          <span class="label">Trip Price</span>
          <span class="value" th:utext="'â‚¬' + ${itinerary.tripPrice}"
            >â‚¬7,200</span
          >
        </div>
      </div>
    </div>

    <div class="section" th:each="date : ${itinerary.dates}">
      <div class="date-header">
        <span
          th:utext="${#temporals.format(#temporals.createDate(date.date), 'MMMM d, yyyy')}"
          >Date</span
        >
        <span th:text="' - ' + ${date.name}">Date Name</span>
        <img th:src="${edgeFadeUrl}" class="date-underline-img" />
      </div>

      <div
        th:each="dateItem : ${dateItems}"
        th:if="${dateItem.date.id == date.id}"
        class="dateitem"
      >
        <h3 th:utext="${dateItem.name}">DateItem Title</h3>
        <div th:if="${dateItem.pdfUrl != null and !dateItem.pdfUrl.isEmpty()}">
          <div class="pdf-link-container">
            <a th:href="${dateItem.pdfUrl}" target="_blank" class="pdf-link">
              ðŸ“„ View PDF Document
            </a>
          </div>
        </div>
        <div class="dateitem-content">
          <div
            th:if="${dateItem.imageUrls != null and !dateItem.imageUrls.isEmpty()}"
            class="dateitem-image-container"
          >
            <img
              th:each="imageUrl : ${dateItem.imageUrls}"
              th:src="${imageUrl}"
              class="dateitem-image"
              alt="DateItem Image"
            />
          </div>
          <div class="description" th:utext="${dateItem.description}">
            DateItem Description
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
